<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> Metasploitable 2 | Esra NurSOYLU </title> <meta name="description" content=" Metasploitable 2 "> <meta name="keywords" content="pentester, purple teamer, csoc engineer, soc t2 analyst"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="Esra Nur SOYLU"> <meta property="article:section" content="metasploitable"> <meta property="article:tag" content=""> <meta property="article:published_time" content="2018-10-13 00:00:00 +0300"> <meta property="og:url" content="http://localhost:4000/metasploitable-2.html"> <meta property="og:title" content=" Metasploitable 2 | Esra NurSOYLU "> <meta property="og:image" content="http://localhost:4000"> <meta property="og:description" content=" Metasploitable 2 "> <meta property="og:site_name" content="Esra Nur SOYLU"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="naoumine"> <meta name="twitter:title" content=" Metasploitable 2 | Esra NurSOYLU "> <meta name="twitter:description" content=" Metasploitable 2 "> <meta name="twitter:image:src" content="http://localhost:4000"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" Metasploitable 2 | Esra NurSOYLU "> <meta itemprop="description" content=" Metasploitable 2 "> <meta itemprop="image" content="http://localhost:4000"> <!-- Canonical link tag --> <link rel="canonical" href="http://localhost:4000/metasploitable-2.html"> <link rel="alternate" type="application/rss+xml" title="Esra NurSOYLU" href="http://localhost:4000/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.ico"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="http://localhost:4000/">Esra Nur<span>SOYLU</span></a></h1> <ul class="navbar"> <li><a href="http://localhost:4000/about">WhoAmI</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2018-10-13T00:00:00+03:00" itemprop="datePublished">Oct 13, 2018</time></p> <h1 class="post-title" itemprop="name headline">Metasploitable 2</h1> </header> <div class="post-content" itemprop="articleBody"> <h2 id="metasploitable-2">Metasploitable 2</h2> <p>Victim Machine‚Äôs IP Address: 192.168.207.133 Attacker Machine‚Äôs IP Address: 192.168.207.162</p> <p><img src="../assets/images/2018-10-13/01.png" alt="Metasploitable 2" /></p> <p>We do a classic nmap scan. You have seen a simple scan result without using any parameters. So now let‚Äôs do a detailed port scan !</p> <p><img src="../assets/images/2018-10-13/02.png" alt="Metasploitable 2" /></p> <p>As we have seen a much more detailed result. So we need to use the parameter.</p> <p>Nmap Parameters:</p> <p><strong>-sS:</strong> This scaning is often used in penetration tests. There are two reasons for this. Firstly, only one packet is sent in the SYN scan, so the scan takes place quickly and the second is not blocked by the structures such as firewall / IPS because the 3-hands handshake is not complete.</p> <p><strong>-sV:</strong> Learns machine‚Äôs version information. The most important point I have to mention here is to complete 3 hands handshaking while performing a nmap version scan. That‚Äôs why we are more likely to be blocked by firewalls and logos are seen as we connect.</p> <p><strong>-O:</strong> Makes the operating system discovery.</p> <h3 id="ftp">FTP</h3> <p><img src="../assets/images/2018-10-13/ftp-03.png" alt="Metasploitable 2" /></p> <p>I‚Äôm connecting to the IP address using the Ftp client. If the ftp servers are not disabled, everyone has anonymous: anonymous users will do the installation.</p> <p><img src="../assets/images/2018-10-13/ftp-04.png" alt="Metasploitable 2" /></p> <p>I‚Äôll try to get the link from the computer to the directory by installing the shell.php. I‚Äôm trying to upload shell.php in my local directory with the put command immediately, but I get 553 error that means that the configuration settings of the ftp server to close to the home directory.</p> <p><img src="../assets/images/2018-10-13/ftp-05.png" alt="Metasploitable 2" /></p> <p>I‚Äôm trying to change the directory with cd command, but still not, I can not leave the home directory, bye command to end the session.</p> <p><img src="../assets/images/2018-10-13/ftp-06.png" alt="Metasploitable 2" /></p> <p>I‚Äôm trying to exploit the vulnerabilities in the service and exploit the msfconsole.</p> <p><img src="../assets/images/2018-10-13/ftp-07.png" alt="Metasploitable 2" /></p> <p>And I‚Äôm ROOT! It‚Äôs OK üôÇ</p> <h3 id="ssh">SSH</h3> <p>What is SSH? SSH, or Secure Shell is a remote management protocol that allows users to control and edit their servers over the Internet. I‚Äôm going to first attack the SSH service. I‚Äôm searching to use the ssh_login module from msfconsol. I came up with 2 modules, we need the user: pass list for the first module, and the other we need rsa key. Since I did not have the rsa key so I continue with the first module.</p> <p><img src="../assets/images/2018-10-13/ssh-08.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/ssh-09.png" alt="Metasploitable 2" /></p> <p>After a series of attempts, there are 2 users, user: user and msfadmin:msfadmin, no low user root rights, after entering the machine, we will privilege escalation.</p> <p><img src="../assets/images/2018-10-13/ssh-10.png" alt="Metasploitable 2" /></p> <p>I enter the system with the user ssh client. I see that I am the standard user who is looking at the group rights again with the id command. I‚Äôm trying to be root with Sudo water but I get the error because the user configuration file (/etc/sudoers) is not included.</p> <p><img src="../assets/images/2018-10-13/ssh-11.png" alt="Metasploitable 2" /></p> <p>We entered the machine. Now if you want to privilege escalation you can do that steps:</p> <p><img src="../assets/images/2018-10-13/ssh-12.png" alt="Metasploitable 2" /></p> <p>Firstly, we learned System Information.</p> <p><img src="../assets/images/2018-10-13/ssh-13.png" alt="Metasploitable 2" /></p> <p>Second, we investigated the vulnerabilities in the system.</p> <p><img src="../assets/images/2018-10-13/ssh-14.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/ssh-15.png" alt="Metasploitable 2" /></p> <p>the exploit we found, we have downloaded our own machines as server.</p> <p><img src="../assets/images/2018-10-13/ssh-16.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/ssh-16_2.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/ssh-17.png" alt="Metasploitable 2" /></p> <p>Than, I try to access /etc/sudoers file. I can give root privileges to user ‚Äúuser‚Äù, I can increase the privilege. But It‚Äôs not work.</p> <h3 id="telnet">TELNET</h3> <p>Telnet service is running on port 23. Telnet briefly; It is as TCP / IP type protocol. Developed to connect to a machine with an Internet network from another machine. Since Nmap cannot find any service version number in the service scan, I will try to determine the version using the auxiliary modules in metasploit.</p> <p><img src="../assets/images/2018-10-13/ssh-18.png" alt="Metasploitable 2" /></p> <p>When I review the incoming output, it goes through the text in ‚Äúlogin with as msfadmin / msfadmin ‚Äù.</p> <p><img src="../assets/images/2018-10-13/ssh-19.png" alt="Metasploitable 2" /></p> <p>Yesss, Login is successful! Now I need to know what authority we have in the system.</p> <p><img src="../assets/images/2018-10-13/ssh-20.png" alt="Metasploitable 2" /></p> <p>Okey.. Then I need to privilege escalation. It says the operating system can cover versions from 2.6.9 to 2.6.33(from nmap scan). When I search from Exploitdb, I see that there are exploit written in c, covering version 2.6.x.</p> <p><img src="../assets/images/2018-10-13/ssh-21.png" alt="Metasploitable 2" /></p> <p>I‚Äôm recording the exploit with the wget command. I‚Äôm doing the file name test.c. Then I edit the exploit with the help of the leafpad, normally I need to create a file named run / tmp into the file, and write the bash script into it, but I‚Äôm writing the payload myself, thinking that the user doesn‚Äôt have netcat installed.</p> <p><img src="../assets/images/2018-10-13/ssh-22.png" alt="Metasploitable 2" /></p> <p>Then in my current directory I‚Äôm standing up with my http service on my IP address with python.</p> <p><img src="../assets/images/2018-10-13/ssh-23.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/ssh-24.png" alt="Metasploitable 2" /></p> <p>I compile my c file with gcc, then I find the operation number of the linux task manager and the udev service (2718), then carry the payload with the mv command to the tmp directory.</p> <h3 id="tomcat">TOMCAT</h3> <p>I see that the apache server is installed in the system. I need to gather information on the system.</p> <p><img src="../assets/images/2018-10-13/tomcat-25.png" alt="Metasploitable 2" /></p> <p>We need to use exploits that give us the best results. (‚Äúexcellent‚Äù).</p> <p><img src="../assets/images/2018-10-13/tomcat-26.png" alt="Metasploitable 2" /></p> <p>I use the auxiliary module first because I need to collect information about the system to use the exploit.</p> <p><img src="../assets/images/2018-10-13/tomcat-27.png" alt="Metasploitable 2" /></p> <p>After entering the necessary information I‚Äôm running the exploit.</p> <p><img src="../assets/images/2018-10-13/tomcat-28.png" alt="Metasploitable 2" /></p> <p>Now I‚Äôm on the shell screen of the machine. But I‚Äôm not root. So I want to be root.</p> <p><img src="../assets/images/2018-10-13/tomcat-29.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-30.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-31.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-32.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-33.png" alt="Metasploitable 2" /></p> <p>I‚Äôm processing it after finding the appropriate exploit to privilege escalation.</p> <p><img src="../assets/images/2018-10-13/tomcat-34.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-35.png" alt="Metasploitable 2" /></p> <p><img src="../assets/images/2018-10-13/tomcat-36.png" alt="Metasploitable 2" /></p> <p>Yesss, And we are ROOT !</p> <aside class="share"> <p>If you liked this article and think others should read it, please share it on <a href="http://twitter.com/share?text=Metasploitable 2&amp;url=http://localhost:4000/metasploitable-2.html&amp;via=naoumine" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> or <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/metasploitable-2.html" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a>.</p> </aside> </div> </article> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2019 Esra Nur SOYLU &middot; &lt;/&gt; Powered by <a href="https://ghost.org/">Ghost</a> | <a href="http://localhost:4000/feed.xml" target="_blank">RSS</a></small> </div> </footer> </main> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-83161908-4']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>

<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri | Esra NurSOYLU </title> <meta name="description" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri "> <meta name="keywords" content="pentester, purple teamer, csoc engineer, soc t2 analyst"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="Esra Nur SOYLU"> <meta property="article:section" content="owasp,, top, 10,, zafiyet,, sızma"> <meta property="article:tag" content=""> <meta property="article:published_time" content="2018-11-01 00:00:00 +0300"> <meta property="og:url" content="http://localhost:4000/owasp-top-10-zafiyetleri-ve-sizma-yontemleri.html"> <meta property="og:title" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri | Esra NurSOYLU "> <meta property="og:image" content="http://localhost:4000"> <meta property="og:description" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri "> <meta property="og:site_name" content="Esra Nur SOYLU"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="naoumine"> <meta name="twitter:title" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri | Esra NurSOYLU "> <meta name="twitter:description" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri "> <meta name="twitter:image:src" content="http://localhost:4000"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri | Esra NurSOYLU "> <meta itemprop="description" content=" OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri "> <meta itemprop="image" content="http://localhost:4000"> <!-- Canonical link tag --> <link rel="canonical" href="http://localhost:4000/owasp-top-10-zafiyetleri-ve-sizma-yontemleri.html"> <link rel="alternate" type="application/rss+xml" title="Esra NurSOYLU" href="http://localhost:4000/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.ico"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="http://localhost:4000/">Esra Nur<span>SOYLU</span></a></h1> <ul class="navbar"> <li><a href="http://localhost:4000/about">WhoAmI</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2018-11-01T00:00:00+03:00" itemprop="datePublished">Nov 1, 2018</time></p> <h1 class="post-title" itemprop="name headline">OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri</h1> </header> <div class="post-content" itemprop="articleBody"> <h2 id="1-sql-injection">1. SQL Injection</h2> <p><img src="../assets/images/2018-11-01/sql-01.png" alt="SQL Injection" /></p> <p>İlk başta normal kullanıcı gibi giriş yapmayı deniyorum. Ve doğal olarak siteye herhangi bir kayıdım olmadığı için giriş yapamıyorum. Ancak benim amacım zaten siteye giriş yapmak değildi. Benim amacım bana hata mesajını gönderirken bilgilerimi ekrana yazdırıp yazdırmadığını kontrol etmekti. Ve yukarıda ki ekranda da görüldüğü gibi Result for “esranur”, 0 records found şeklinde dönüş aldım. Yani bu demek oluyor ki sitede açık olabilir eğer sistemde zararlı karakterler filtrelenmiyorsa istediğim her bilgiyi ekrana bastırmayı deneyebilirim.</p> <p>Bu işlemden sonra yeni bir account oluşturdum. Name: esranur Password: passwrd olacak şekilde bilgilerimi veri tabanına yollatarak bir hesap açmış oldum.</p> <p>Web uygulamalarında birçok işlem için kullanıcıdan alınan veri ile dinamik SQL cümlecikleri oluşturulur. Örneğin; “SELECT * FROM Products* örnek SQL cümleciği basit şekilde veri tabanından web uygulamasına doğru tüm ürünleri döndürücektir. Bu SQL cümlecikleri oluştururken araya sıkıştırılan herhangi bir meta-karakter SQL Injection’a neden olabilir.</p> <p>Giriş sayfasına SQL Injection açıkları denerken farkı veritabanlarına ait özel karakterler ile giriş yaptım. Bu veritabanları MySQL , Oracle SQL ve diğer popüler veritabanları olabilir. Örnek verirsem çoğu veritabanı / veya * kullanrak yorum satırı eklemeyi kullanır. Bunun gibi özel karakterler deniyorum.</p> <p><img src="../assets/images/2018-11-01/sql-02.png" alt="SQL Injection" /></p> <p>Genelde SQL Injection yapılırken kullanılan özel karakter resimde görüldüğü gibi tırnak karakteridir. Ve beklediğimiz gibi hata mesajı aldık .</p> <p><img src="../assets/images/2018-11-01/sql-03.png" alt="SQL Injection" /></p> <p>Bu hata mesajı bize yol göstericidir. Yani bize veritabanı olarak hangi SQL türü kullandığını söylüyor:</p> <p><code class="highlighter-rouge">opt/lampp/htdocs/mutillidae/classes/MySQLHandler.php</code></p> <p>Kullanılan veritabanının MySQL veritabanı olduğunu öğrenmiş olduk. Ve aynı zamanda hangi SQL sorgusunu çalıştıracağımızı bize söylemiş oldu.Yani bu demektir ki SQL Injection’a ait herhangi bir kontrol içermemektedir.</p> <p><img src="../assets/images/2018-11-01/sql-04.png" alt="SQL Injection" /></p> <p>Burada biraz SQL bilgisine girmek istiyorum.Tırnak olayından bahsetmiştim. 15=15 eşitliği her zaman doğru bir ifade olacağı için her türlü true değeri dönecektir. Ve araya koyulan OR işareti ise sorgu da bu koşullardan biri sağlandığında sorgunun yapılması gerekmesini sağlar. Yani kısaca burada manuel olarak elle denemeler yaparak veritabanında ki tüm verileri çekmeye çalıştım.</p> <p><img src="../assets/images/2018-11-01/sql-05.png" alt="SQL Injection" /></p> <p>Burada beklemediğim bir sonuç aldım. Hata kısmında username kısmında sadece tırnak kalması gerekmekteydi.Yani o zaman sorgunun çalıştığını anlardım…</p> <p>Dikkat edecek olursak bana dönen SQL Hatası şu şekildedir:</p> <p><code class="highlighter-rouge">SELECT * FROM accounts WHERE username=’esranur’ AND password=’passwrd’</code></p> <p>Bu sorgu bize çok şeyi anlatmaktadır.Aslında sorgular çok basit bir mantık içinde çalışmaktadır.Eğer çalışan sorgunun sonucu TRUE ise bize girdiğimiz user’a ait bilgileri döndürecektir. Bu sorguda kullanıcısı esranur olan ve şifresi passwrd olan kullanıcı var ise bana sonucu döndür. O halde biz bu sorguyu kolay bir şekilde değiştirebiliriz.</p> <p>Bizim türeteceğimiz sorgu şu şekilde olacaktır:</p> <p><code class="highlighter-rouge">SELECT * FROM accounts WHERE (username=’’ AND password=’’) OR 1=’1</code></p> <p>Şimdi sorgumuzu inceleyecek olursak username ve şifre kısmını belirli bir kişiye ait kılmadan bir sorgu gerçekleştirmek istedim. Bunların değerlerini boş verdiğim için bu kısmı atlayacaktır ve diğer koşula bakacaktır. Burada OR komutunu görünce diğer koşulu inceleyecektir ve eğer o sorgu doğruysa o zaman bize tüm sonuçları getirecektir. Ve her zaman 1=1’dır. Yani sorgumuz TRUE döndürecektir.</p> <p>O zaman deneylim.</p> <p><code class="highlighter-rouge">‘</code> koyarak başlıyoruz çünkü biliyoruz ki password kısmını kapatmamızı sağlayacaktır. Böylece herhangib bir hata almadan kesme işareti dışındakiler okunacaktır. Yani input girişimiz:</p> <p><code class="highlighter-rouge">‘ OR 1=’1</code></p> <p>Ve bize dönen sonuç çalıştı:</p> <p><img src="../assets/images/2018-11-01/sql-06.png" alt="SQL Injection" /></p> <p>Peki acaba Username=john olan ve Password=monkey olan bir kullanıcı oluştursam ve girişi yapsam acaba bana databesa içeriğindeki tüm benzer içerikleri getirecek mi diye baktığımda cevabı evet oldu. Bu demek oluyor ki Application Uniqueness kontrolü yapmıyor. Yani database kısmında Unique Key tutulmamaktadır. Herhangi bir John maymun sevip bunu şifresi olarak koyabilirdi bu yüzden aslında aynı değerlerle giriş yapmaları çok da imkansız bir şey değildir. Eğer username mail ile bağdaştırılmış olsaydı o zaman Unique bir şekilde bilgiler gelebilirdi.</p> <h2 id="2-broken-authentication-and-session-management">2. Broken Authentication And Session Management</h2> <p>Bu uygulamadaki amaç ise sisteme giriş yapmak için kullanıcı adı ve parola girişi gerçekleştirmeden sistemde oturum açmaktır.</p> <p>Kullanacağım payload sayesinde istenilen kullanıcı adı ve parola yazılmasına gerek yoktur. Burada öncelikle sql açığı olup olmadığını anlamak için tek tırnak işareti kullanacağım. Eğer açık var ise saldırgana veritabanı hatası verecektir bu sayede kullanılan MYSQL veritabanını öğrenmiş olacaktır. Payloadımız X’ or 3 = 3 # şeklinde olacaktır. Burada amacımız ilk doğrulamayı atlasa bile ikinci doğrulama doğru olacağından dolayı doğru dönecektir. “#” işareti ise kendinden sonra gelen ifadeleri yorum kabul etmeye yarar. Saldırgan bu şekilde sisteme girecektir.</p> <p><img src="../assets/images/2018-11-01/broken-01.png" alt="Broken Authentication And Session Management" /></p> <p>Sonuç olarak admin yetkisinde sisteme girmiş olduk:</p> <p><img src="../assets/images/2018-11-01/broken-02.jpg" alt="Broken Authentication And Session Management" /></p> <h2 id="3-cross-site-scripting-xss">3. Cross Site Scripting (XSS)</h2> <p>İlk olarak input kısmında herhangi bir kontrol olup olmadığına bakıyorum.</p> <p><img src="../assets/images/2018-11-01/xss-01.png" alt="Cross Site Scripting XSS" /></p> <p>Ve görüldüğü gibi herhangi bir kontrol yapmadan sonucu bana döndürmeye çalıştı. Kaynak kodlarına baktığımda ise script kısımlarını aramaya başlıyorum:</p> <p><img src="../assets/images/2018-11-01/xss-02.jpg" alt="Cross Site Scripting XSS" /></p> <p>Web Server Javascript vasıtasıyla aslında wb browserıalıştırıyor ve bilgisayar web browser’ı işlem için çalıştırıyor. Burada iki önemli bileşen var. Server-side ve browser-side. İlk scriptimizi çalıştırmayı deneylim.</p> <p><img src="../assets/images/2018-11-01/xss-03.png" alt="Cross Site Scripting XSS" /></p> <p>Aldığımız sonuç:</p> <p><img src="../assets/images/2018-11-01/xss-04.png" alt="Cross Site Scripting XSS" /></p> <p>Demek ki ben istediğim herhangi bir script biçimini input kısmına girebilirim.Basit bir deneme ile sadece script’in çalışıp çalışmadığını kontrol ettik.Şimdi ise Cookie değerlerini döndürmek istiyorum.Bunun için input kısmına:</p> <p><code class="highlighter-rouge">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</code></p> <p>ifadesini giriyoruz.Ve sonuç olarak ise gelen ekranımız şu şekildedir:</p> <p><img src="../assets/images/2018-11-01/xss-05.png" alt="Cross Site Scripting XSS" /></p> <p>Şuan da görüldüğü gibi PHP session ID değerine sahibim.PHP , server-side taraflı bir bileşendi.Server-side dinamik olarak değşebilen bir yapıya sahiptir.Çldığımız cookie’yi kendi cookie’mizin yerine yazıp kaydedebiliriz ve sayfayı yenilediğimizde aslında çalmış olduğumuz cooki değerini kendi cookie değerimiz gibi gösterebiliriz.</p> <p>Server-side tarafı daha tehlikelidir. Ben kurbana phising saldırısı ile link yolladığımda ve ona tıkladığında giriş yaptığı tüm cookie değerlerini elde edebilirim.Yani bu script’i backdoor ile çalıştırıp o an da her ne yapıyorsa giriş değerlerini okuyabilirim. Buna kredi kartı bilgileri de dahil.</p> <p>Peki şimdi ikinci aşamaya geçebiliriz. Blog kısmı için input alan sayfada html taglarının kontrol ediliğ edilmediklerine bakmakla başlayalım. Ben &lt;hr&gt; komutunu kullanarak yazımın altına düz çizgi çekip çekmediğine bakacağım :</p> <p><img src="../assets/images/2018-11-01/xss-06.png" alt="Cross Site Scripting XSS" /></p> <p>Evet sonuca bakacak olursak istediğimiz sonucu döndürmüş olduk.Yani bu demektir ki herhangi bir tag kullanmama izin veriliyor.</p> <p>Yapılabileceklerden bir tanesi de sayfa içinden sayfaya yönlendirme yaptırabiliriz.</p> <p><code class="highlighter-rouge">&lt;iframe src=”https://www.apachefriends.org/tr/index.html”&gt;&lt;/iframe&gt;</code></p> <p>ifadesi ile Databese içerisine başka bir web site gömdüm:</p> <p><img src="../assets/images/2018-11-01/xss-07.png" alt="Cross Site Scripting XSS" /></p> <p>Bu yaptığımız şuan da zararıs bir site gömmeydi.Ancak elimde malicious bir domain olsaydı bunun sonuçları çok daha farklı olurdu. Login ve password girişli bir site bile olmuş olsa bu bir zafiyettir.Çünkü kullanıcının yaptığı hareketleri gözlemleyebilirim.</p> <p>Bu sefer direk olarak yeni bir window açmaya yönelik direkt bir kod çalıştırmak için ise bu script kullanılabilir.</p> <p><code class="highlighter-rouge">&lt;script&gt;window.location = “www.google.com”; &lt;/script&gt;</code></p> <h2 id="4-broken-access-control-kırık-erişim-kontrolü">4. Broken Access Control (Kırık Erişim Kontrolü)</h2> <p>Bu yıl OWASP listesine Broken Access Control zafiyetini eklemiştir. OWASP 2013 listesinde yer alan “Insecure Direct Object References” ve “Missing Functional Level Access Control” zafiyetlerinin birleştirilmiş halidir. Bu zafiyet kullanıcı yetkileri ile alakalıdır.</p> <h2 id="5-security-misconfigurationgüvenlik-yanlış-yapılandırma">5. Security Misconfiguration(Güvenlik Yanlış Yapılandırma)</h2> <p>Güvenlik ile ilgili tanımların(örnek olarak şifreleme) zayıf,yanlış veya varsayılan olarak bırakılmasından kaynaklı saldırılardır. Genelde sayfalarda robots.txt kısmı varsayılan olarak bırakıldığı için buradan saldırgan kritik bilgilere ulaşabilir.</p> <h2 id="6-sensitive-data-exposure">6. Sensitive Data Exposure</h2> <p>Verilerin açık/okunabilir olarak depolanması saldırganların kolayca erişip kullanabilmesine olanak sağlar. Saldırganlar genellikle direkt olarak kriptolu veriyi kırmaya çalışmazlar. Sunuculardan, müşterilerin tarayıcılarından veya taşınan verileri çalmak, aradaki adam saldırısı(man-in-the-middle attack) yapmak veya anahtarları çalmak gibi yolları kullanırlar.</p> <p>Robots.txt dosyası sitenizin kök dizininde bulunur.Yani bir arama motoru sitenizi indekslemeye çalıştığında ilk yaptığı şey sitenizin kök dizininde bu dosyayı aramakolacaktır. Bu dosya mevcut ise sitenizde izin verdiğiniz kısımları gezmeye başlarlar. Eğer bu dosya mevcut değilse sitenizin tamamını taraması gerektiğini düşüneceğinden her yerini indeksler.</p> <p>Robots.txt dosyası bazen güvenlik zafiyeti oluşturabilir. Bunun nedeni ise sitenizin güvenlik açısından sorun oluşturabilecek dizinlerini burada kaydetmiş oluyorsunuz.</p> <p><img src="../assets/images/2018-11-01/data-exposure-01.png" alt="Cross Site Scripting XSS" /></p> <p>Resimde görüldüğü gibi bir sürü dosya yolunu görebildik. Buradan gözüme en kritik olan passwords klasörüne gitmek istiyorum.</p> <p><img src="../assets/images/2018-11-01/data-exposure-02.png" alt="Cross Site Scripting XSS" /></p> <p>Ve görüldüğü gibi accounts.txt şeklinde bir text dökümanı gördüm.Bunun da içerisine girdiğimde ise :</p> <p><img src="../assets/images/2018-11-01/data-exposure-03.png" alt="Cross Site Scripting XSS" /></p> <h2 id="7-insufficient-attack-protection">7. Insufficient Attack Protection</h2> <h2 id="8-cross-site-request-forgery-csrf--siteler-ötesi-i̇stek-sahteciliği">8. Cross Site Request Forgery (CSRF) – Siteler Ötesi İstek Sahteciliği</h2> <p>Günümüzde kodlayıcının,kodlama bilgisi yetersizliğinden kaynaklanan bir güvenlik zafiyetidir. Site yetkilisinin haberi olmaksızın güvenlik açığını istismar ederek çalışır. Saldırganın herhangi bir web sayfasına yerleştirdiği Js veya Html kodlarıyla yetkilinin oturum bilgilerini çalma olayıdır. Bu olayda önemli olan,saldırganın kurban için kodladığı web sayfasını kurbanın açmasıdır. Kurban web sayfasını açtığı takdirde, session(Oturum) bilgileri saniyeler içerisinde kurbana fark ettirmeden değiştirilebilir.</p> <p>Önemli: XSS (Cross Site Scripting) ile CSRF(Cross Site Request Forgery) aynı şey değildir..XSS yetkiliyle ilgilenmez,yani bire bir herhangi bir hedef yoktur.Sistemdeki zafiyet,bire bir herhangi birini oltaya getirmeye gerek kalmaksızın sömürülebilir.Ancak CSRF zafiyetinde bire bir,sistemde yetkili bir hedef bulmak gereklidir.</p> <p>Bu açığı önlemek için Get yerine Post modülü kullanılmalıdır ve Captcha kullanmaya özen gösterilmelidir.</p> <h2 id="9-using-components-with-known-vulnerabilities">9. Using Components With Known Vulnerabilities</h2> <h2 id="10-underprotected-apis">10. Underprotected APIs</h2> <aside class="share"> <p>If you liked this article and think others should read it, please share it on <a href="http://twitter.com/share?text=OWASP TOP 10 Zafiyetleri Ve Sızma Yöntemeleri&amp;url=http://localhost:4000/owasp-top-10-zafiyetleri-ve-sizma-yontemleri.html&amp;via=naoumine" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> or <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/owasp-top-10-zafiyetleri-ve-sizma-yontemleri.html" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a>.</p> </aside> </div> </article> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2019 Esra Nur SOYLU &middot; &lt;/&gt; Powered by <a href="https://ghost.org/">Ghost</a> | <a href="http://localhost:4000/feed.xml" target="_blank">RSS</a></small> </div> </footer> </main> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-83161908-4']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>
